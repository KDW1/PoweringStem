<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h2>From Medifind API, shown at medifind.com/symptom-checker, the survey shown is an example of what a symptom survey could look like</h2>
    <h1>Symtpoms:</h1>
    <form action="/diagnosis" method="post">
        <input type="search" name="" id="symptomSearch">
        <p id="chips"></p>
        <h3>Autocomplete...</h3>
        <ul id="symptoms">
    
        </ul>
        <h2>Gender:</h2>
        <input type="radio" name="sex" id="" value="male" required>
        <label for="male">Male</label>
        <br>
        <input type="radio" name="sex" id="" value="female" required>
        <label for="male">Female</label>
        <h1>Country:</h1>
        <input type="text" name="country">
        <h2>Age</h2>
        <select name="dob">
            <option value=1>0 - 28 days</option>
            <option value=2>29 days - 1 year</option>
            <option value=3>1 - 5 years</option>
            <option value=4>6 - 12 years</option>
            <option value=5>13 - 16 years</option>
            <option value=6>17 - 29 years</option>
            <option value=7>30 - 39 years</option>
            <option value=8>40 - 49 years</option>
            <option value=9>50 - 64 years</option>
            <option value=10>65 + years</option>
          </select>
    </form>
    <script src="https://code.jquery.com/jquery-3.6.3.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
    <script>
        $('#symptomSearch').keyup(async (e) => {
            let keyVal = $('#symptomSearch').val();
            console.log(keyVal);
            if((e.keycode || e.which) == '13') {
                console.log('Entered: ' + keyVal);
                let text = $('p#chips').text();
                text = text.split(',');
                text.unshift(keyVal);
                console.log('Text:');
                console.log(text);
                $('p#chips').text(text.join(','));
                $('#symptomSearch').val('');
                $("#symptoms").empty();
            }
            keyVal = $('#symptomSearch').val();
            if(keyVal.length > 2) {
                $("#symptoms").empty();
                let suggestions = await fetch('https://www.medifind.com/api/autocomplete/symptom?input=' + keyVal).then((res) => {return res.json()});
                let relevant = suggestions.slice(0, 8);
                relevant.forEach((data) => {
                    $('#symptoms').append(`<li>${data}</li>`)
                })
                return
            }
        })
    </script>
</body>
</html>